{
    # Global options
    admin off
    email admin@infiniteminds.cc
}

# Redirect HTTP to HTTPS
http://infiniteminds.cc, http://app.infiniteminds.cc {
    redir https://{host}{uri}
}

# HTTPS Configuration
https://infiniteminds.cc, https://app.infiniteminds.cc {
    tls /ssl/infiniteminds.cc.pem /ssl/infiniteminds.cc.key

    # AWSBotService routing
    handle /s3* {
        reverse_proxy awsbotservice.railway.internal fallback awsbotservice-finalproduction.up.railway.app:8080
    }

    # Go Service routing
    handle /skills* {
        reverse_proxy go-service.railway.internal fallback go-service-finalproduction.up.railway.app:8080
    }

    handle /db-supported-skills* {
        reverse_proxy go-service.railway.internal fallback go-service-finalproduction.up.railway.app:8080
    }

    handle /add-skill* {
        reverse_proxy go-service.railway.internal fallback go-service-finalproduction.up.railway.app:8080
    }

    handle /supported-skills* {
        reverse_proxy go-service.railway.internal fallback go-service-finalproduction.up.railway.app:8080
    }

    handle /skills/search* {
        reverse_proxy go-service.railway.internal fallback go-service-finalproduction.up.railway.app:8080
    }

    handle /health {
        reverse_proxy go-service.railway.internal fallback go-service-finalproduction.up.railway.app:8080
    }

    # SithBotModeManagerService routing
    handle /mode* {
        reverse_proxy sithbotmodemanagerservice.railway.internal fallback sithbotmodemanagerservice-finalproduction.up.railway.app:8080
    }

    # SithPythonServices routing
    handle /memory* {
        reverse_proxy sithpythonservices.railway.internal fallback sithpythonservices-finalproduction.up.railway.app:8000
    }

    # SithGoServices routing
    handle /go* {
        reverse_proxy sithgoservices.railway.internal fallback sithgoservices-finalproduction.up.railway.app:8080
    }
}
